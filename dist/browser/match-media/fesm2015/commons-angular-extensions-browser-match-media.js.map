{"version":3,"file":"commons-angular-extensions-browser-match-media.js","sources":["ng://@co.mmons/angular-extensions/browser/match-media/match-media.ts","ng://@co.mmons/angular-extensions/browser/match-media/screen-size.ts","ng://@co.mmons/angular-extensions/browser/match-media/match-width.ts","ng://@co.mmons/angular-extensions/browser/match-media/index.ts","ng://@co.mmons/angular-extensions/browser/match-media/commons-angular-extensions-browser-match-media.ts"],"sourcesContent":["import {Pipe, PipeTransform, Directive, TemplateRef, ViewContainerRef, Input} from \"@angular/core\";\n\n@Pipe({\n    name: \"matchMedia\",\n    pure: false\n})\nexport class MatchMediaPipe implements PipeTransform {\n\n    transform(query: string): boolean {\n\n        if (query != this.query) {\n            this.destroy();\n            this.queryList = window.matchMedia(this.prepareQuery(query));\n        }\n\n        return this.queryList.matches;\n    }\n\n    protected prepareQuery(inputQuery: string) {\n        return inputQuery;\n    }\n\n    private queryList: MediaQueryList;\n\n    private query: string;\n\n    private destroy() {\n        this.queryList = null;\n    }\n\n    ngOnDestroy() {\n        this.destroy;\n    }\n\n}\n\n@Directive({\n    selector: \"[ifMatchMedia]\"\n})\nexport class IfMatchMediaDirective {\n\n    constructor(private template: TemplateRef<any>, private viewContainer: ViewContainerRef) {\n    }\n\n    @Input()\n    set ifMatchMedia(query: string) {\n\n        let matches = window.matchMedia(query).matches;\n\n        if (matches) {\n            this.viewContainer.createEmbeddedView(this.template);\n        } else if (!matches) {\n            this.viewContainer.clear();\n        }\n    }\n}\n","export class ScreenSizeMinWidth {\n    \n    static readonly xs = 0;\n\n    static readonly extraSmall = ScreenSizeMinWidth.xs;\n\n    static readonly sm = 576;\n\n    static readonly small = ScreenSizeMinWidth.sm;\n\n    static readonly md = 768;\n\n    static readonly tablet = ScreenSizeMinWidth.md;\n\n    static readonly medium = ScreenSizeMinWidth.md;\n\n    static readonly lg = 992;\n\n    static readonly large = ScreenSizeMinWidth.lg;\n\n    static readonly desktop = ScreenSizeMinWidth.lg;\n\n    static readonly xl = 1200;\n\n    static readonly extraLarge = ScreenSizeMinWidth.xl;\n\n    static readonly desktopWide = ScreenSizeMinWidth.xl;\n\n}","import {Pipe, PipeTransform, Directive, TemplateRef, ViewContainerRef, Input} from \"@angular/core\";\nimport {ScreenSizeMinWidth} from \"./screen-size\";\nimport {MatchMediaPipe} from \"./match-media\";\n\nfunction buildMediaQuery(comparison: \"lte\" | \"gte\", input: string): string {\n\n    let size: any = input;\n\n    // when predefined size is given\n    if (input.match(/^\\D+$/)) {\n        size = ScreenSizeMinWidth[input];\n\n        if (size === undefined) {\n            throw new Error(\"Cannot find predefined screen size for key \" + input);\n        }\n\n        if (comparison == \"lte\") {\n            size = size - 1;\n        }\n    }\n\n    return `(${comparison == \"gte\" ? \"min-width\" : \"max-width\"}: ${size}px)`;\n}\n\n@Pipe({\n    name: \"matchGreaterWidth\",\n    pure: false\n})\nexport class MatchWidthGreaterPipe extends MatchMediaPipe {\n\n    protected prepareQuery(query: string) {\n        return buildMediaQuery(\"gte\", query);\n    }\n\n}\n\n@Pipe({\n    name: \"matchLesserWidth\",\n    pure: false\n})\nexport class MatchLesserWidthPipe extends MatchMediaPipe {\n\n    protected prepareQuery(query: string) {\n        return buildMediaQuery(\"lte\", query);\n    }\n\n}\n\n@Directive({\n    selector: \"[ifMatchGreaterWidth]\"\n})\nexport class IfMatchGreaterWidthDirective {\n\n    constructor(private template: TemplateRef<any>, private viewContainer: ViewContainerRef) {\n    }\n\n    @Input()\n    set ifMatchGreaterWidth(minWidth: string) {\n\n        let matches = window.matchMedia(buildMediaQuery(\"gte\", minWidth)).matches;\n\n        if (matches) {\n            this.viewContainer.createEmbeddedView(this.template);\n        } else if (!matches) {\n            this.viewContainer.clear();\n        }\n    }\n}\n\n@Directive({\n    selector: \"[ifMatchLesserWidth]\"\n})\nexport class IfMatchLesserWidthDirective {\n\n    constructor(private template: TemplateRef<any>, private viewContainer: ViewContainerRef) {\n    }\n\n    @Input()\n    set ifMatchLesserWidth(maxWidth: string) {\n\n        let matches = window.matchMedia(buildMediaQuery(\"lte\", maxWidth)).matches;\n\n        if (matches) {\n            this.viewContainer.createEmbeddedView(this.template);\n        } else if (!matches) {\n            this.viewContainer.clear();\n        }\n    }\n}","import {NgModule} from \"@angular/core\";\n\nimport {MatchMediaPipe, IfMatchMediaDirective} from \"./match-media\";\nimport {MatchWidthGreaterPipe, MatchLesserWidthPipe, IfMatchGreaterWidthDirective, IfMatchLesserWidthDirective} from \"./match-width\";\n\nexport * from \"./match-media\";\nexport * from \"./match-width\";\n\n@NgModule({\n    declarations: [MatchMediaPipe, IfMatchMediaDirective, MatchWidthGreaterPipe, MatchLesserWidthPipe, IfMatchGreaterWidthDirective, IfMatchLesserWidthDirective],\n    exports: [MatchMediaPipe, IfMatchMediaDirective, MatchWidthGreaterPipe, MatchLesserWidthPipe, IfMatchGreaterWidthDirective, IfMatchLesserWidthDirective]\n})\nexport class MatchMediaModule {\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}